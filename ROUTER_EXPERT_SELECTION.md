# Router & Expert Selection ìƒì„¸ ë¶„ì„

## ğŸ“‹ ëª©ì°¨
1. [Router ê¸°ëŠ¥ ì œê±° ë°°ê²½](#router-ê¸°ëŠ¥-ì œê±°-ë°°ê²½)
2. [í˜„ì¬ Expert Selection ë™ì‘ ë°©ì‹](#í˜„ì¬-expert-selection-ë™ì‘-ë°©ì‹)
3. [Request Flow ì „ì²´ íë¦„](#request-flow-ì „ì²´-íë¦„)
4. [Role Selection íœ´ë¦¬ìŠ¤í‹± ìƒì„¸](#role-selection-íœ´ë¦¬ìŠ¤í‹±-ìƒì„¸)

---

## ğŸš« Router ê¸°ëŠ¥ ì œê±° ë°°ê²½

### **Before (ì œê±° ì „):**

ì‹œìŠ¤í…œì—ëŠ” **2ê°€ì§€ ì—­í•  ì„ íƒ ë©”ì»¤ë‹ˆì¦˜**ì´ ë³‘ì¡´í–ˆìŠµë‹ˆë‹¤:

1. **`selectRoles()` - ì •ê·œì‹ ê¸°ë°˜ íœ´ë¦¬ìŠ¤í‹±** (ask.ts:60-149)
   - ì§ˆë¬¸ í…ìŠ¤íŠ¸ì—ì„œ í‚¤ì›Œë“œ íŒ¨í„´ ë§¤ì¹­
   - ì˜ˆ: "ê¸ˆë¦¬" â†’ `['eco']`, "ì‚¼ì„±ì „ì" â†’ `['firm']`

2. **`planRoles()` - AI ê¸°ë°˜ Router** (bridge.ts:314-327)
   - ì‘ì€ LLMì„ í˜¸ì¶œí•´ JSON ì‘ë‹µ íŒŒì‹±
   - ì˜ˆ: `{"roles":["eco","firm"],"mode":"sequential"}`

### **ë¬¸ì œì :**

```typescript
// prepareAsk() in ask.ts:170-214 (Before)
async function prepareAsk(body: AskInput): Promise<PreparedAsk> {
  const explicit = sanitizeSequence(body.roles);
  const fallback = selectRoles(q, preferList);

  // âŒ ëª…ì‹œì  roles ì—†ìœ¼ë©´ AI planner í˜¸ì¶œ
  const plannerEnabled = !explicit.length;
  let planner = null;
  if (plannerEnabled) {
    planner = await planRoles({ query: q, prefer: preferList });  // 200-300ms ì†Œìš”
  }

  // âŒ planner ì‹¤íŒ¨ ì‹œ fallbackìœ¼ë¡œ ë‹¤ì‹œ selectRoles ì‚¬ìš©
  const mergedPath = explicit.length ? explicit
    : plannerPath.length ? enforceAllowed(plannerPath)
    : fallback;
}
```

**ì‹¤ì œ í˜¸ì¶œ íë¦„:**
```
ì‚¬ìš©ì ìš”ì²­
  â†“
prepareAsk()
  â†“
roles ëª…ì‹œ ì•ˆ ë¨?
  â†“ Yes
planRoles() í˜¸ì¶œ â† 200-300ms ì§€ì—° + LLM í† í° ì†Œë¹„
  â†“
JSON íŒŒì‹± ì„±ê³µ?
  â†“ No (ì‹¤íŒ¨ ê°€ëŠ¥)
selectRoles() fallback â† ê²°êµ­ íœ´ë¦¬ìŠ¤í‹± ì‚¬ìš©
```

**ê²°ë¡ :**
- AI plannerëŠ” **ì˜¤ë²„í—¤ë“œë§Œ ë°œìƒ**í•˜ê³  íœ´ë¦¬ìŠ¤í‹±ë³´ë‹¤ ë‚˜ì€ ê²°ê³¼ë¥¼ ë³´ì¥í•˜ì§€ ëª»í•¨
- íœ´ë¦¬ìŠ¤í‹±ì´ ì´ë¯¸ í•œêµ­ì–´ ì§ˆë¬¸ íŒ¨í„´ì„ ì˜ ì²˜ë¦¬í•¨

---

### **After (í˜„ì¬):**

```typescript
// prepareAsk() in ask.ts:170-202 (After)
async function prepareAsk(body: AskInput): Promise<PreparedAsk> {
  const explicit = sanitizeSequence(body.roles);
  const preferList = body.prefer ?? [];

  // âœ… AI planner ì œê±°, íœ´ë¦¬ìŠ¤í‹±ë§Œ ì‚¬ìš©
  const roles = explicit.length ? explicit : selectRoles(q, preferList);

  // âœ… Mode ê²°ì •ë„ ë‹¨ìˆœí™”
  const mode = body.mode !== 'auto' ? body.mode
    : roles.length > 1 ? 'sequential'
    : selectMode(q, 'auto');

  return { q, roles, mode, generationRoles: roles };
}
```

**ê°œì„  íš¨ê³¼:**
- âœ… 200-300ms ì§€ì—° ì œê±°
- âœ… ì½”ë“œ ë³µì¡ë„ ê°ì†Œ
- âœ… ì˜ˆì¸¡ ê°€ëŠ¥í•œ ë™ì‘ (AI plannerì˜ ë¶ˆí™•ì‹¤ì„± ì œê±°)

---

## âš™ï¸ í˜„ì¬ Expert Selection ë™ì‘ ë°©ì‹

### **1ë‹¨ê³„: Role ê²°ì •**

ì‚¬ìš©ì ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ë‹¤ìŒ ìš°ì„ ìˆœìœ„ë¡œ ì—­í• (Expert) ê²°ì •:

```typescript
// ask.ts:170-202
const explicit = sanitizeSequence(body.roles);  // ì‚¬ìš©ì ëª…ì‹œì  ì§€ì •
const preferList = body.prefer ?? [];           // ì„ í˜¸ íŒíŠ¸

const roles = explicit.length > 0
  ? explicit                    // 1ìˆœìœ„: ëª…ì‹œì  ì§€ì •
  : selectRoles(q, preferList); // 2ìˆœìœ„: íœ´ë¦¬ìŠ¤í‹± ìë™ ì„ íƒ
```

#### **ì¼€ì´ìŠ¤ 1: ëª…ì‹œì  ì§€ì • (ìµœìš°ì„ )**

```bash
# API ìš”ì²­ ì˜ˆì‹œ
curl -X POST http://localhost:3001/ask \
  -H "Content-Type: application/json" \
  -d '{
    "q": "ë¯¸êµ­ ê¸ˆë¦¬ ì¸ìƒ ì˜í–¥ì€?",
    "roles": ["eco", "firm"]  # â† ëª…ì‹œì  ì§€ì •
  }'

# ê²°ê³¼: ["eco", "firm"] ì‚¬ìš© (íœ´ë¦¬ìŠ¤í‹± ë¬´ì‹œ)
```

#### **ì¼€ì´ìŠ¤ 2: ìë™ ì„ íƒ (íœ´ë¦¬ìŠ¤í‹±)**

```bash
curl -X POST http://localhost:3001/ask \
  -H "Content-Type: application/json" \
  -d '{
    "q": "ë¯¸êµ­ ê¸ˆë¦¬ ì¸ìƒ í›„ ì‚¼ì„±ì „ì ì£¼ê°€ì™€ ê°€ê³„ ëŒ€ì¶œ ì „ëµì€?"
    # roles í•„ë“œ ì—†ìŒ
  }'

# selectRoles() í˜¸ì¶œ
# â†’ "ê¸ˆë¦¬" (eco), "ì‚¼ì„±ì „ì" (firm), "ëŒ€ì¶œ" (house) ê°ì§€
# â†’ ê²°ê³¼: ["eco", "firm", "house"]
```

---

### **2ë‹¨ê³„: Mode ê²°ì •**

```typescript
// ask.ts:185-191
const hasExplicitMode = body.mode && body.mode !== 'auto';

let mode: 'parallel' | 'sequential';
if (hasExplicitMode) {
  mode = body.mode;  // ëª…ì‹œì  ì§€ì •
} else {
  // ì—­í•  ê°œìˆ˜ë¡œ íŒë‹¨
  mode = roles.length > 1 ? 'sequential' : selectMode(q, 'auto');
}
```

**Mode ê²°ì • ë¡œì§:**

| ì¡°ê±´ | Mode | ì„¤ëª… |
|------|------|------|
| `body.mode="sequential"` | `sequential` | ì‚¬ìš©ì ëª…ì‹œ |
| `body.mode="parallel"` | `parallel` | ì‚¬ìš©ì ëª…ì‹œ |
| `roles.length > 1` | `sequential` | 2ëª… ì´ìƒ â†’ ìˆœì°¨ |
| `roles.length === 1` | `selectMode(q)` | ì§ˆë¬¸ íŒ¨í„´ ë¶„ì„ |

**selectMode() íŒ¨í„´ ë¶„ì„:**
```typescript
// ask.ts:152-158
function selectMode(q: string, mode: 'auto'|'parallel'|'sequential'='auto'){
  if (mode !== 'auto') return mode;

  const normalized = q.toLowerCase();

  // "ë°˜ì˜", "ê¸°ì¤€ìœ¼ë¡œ", "ê·¸ ë‹¤ìŒ" ë“± ìˆœì°¨ í‚¤ì›Œë“œ ê°ì§€
  return /(ë°˜ì˜|ê¸°ì¤€ìœ¼ë¡œ|í† ëŒ€ë¡œ|ì—…ë°ì´íŠ¸|ì¬í•´ì„|ê·¸\s*(?:ë‹¤ìŒ|í›„)|ë¨¼ì €|ìˆœì„œëŒ€ë¡œ|ë‹¨ê³„|ì´ì–´[ì„œì§€ëŠ”]?)/.test(normalized)
    ? 'sequential'
    : 'parallel';
}
```

---

### **3ë‹¨ê³„: Expert ì‹¤í–‰**

#### **Parallel Mode (ë³‘ë ¬)**
```typescript
// ask.ts:484-485
await Promise.all(generationRoles.map((role, index) => runRole(role, index)));
```

```
ì‚¬ìš©ì ì§ˆë¬¸: "ì½”ìŠ¤í”¼ê°€ ë­ì•¼?"
  â†“
selectRoles() â†’ ["eco"]
  â†“
mode = "parallel" (ë‹¨ì¼ ì—­í• )
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Eco Expert  â”‚ â† ë…ë¦½ ì‹¤í–‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
Editor í†µí•© â†’ ìµœì¢… ì¹´ë“œ
```

#### **Sequential Mode (ìˆœì°¨)**
```typescript
// ask.ts:480-483
if (mode === 'sequential') {
  for (let i = 0; i < generationRoles.length; i += 1) {
    await runRole(generationRoles[i], i);
  }
}
```

```
ì‚¬ìš©ì ì§ˆë¬¸: "ë¯¸êµ­ ê¸ˆë¦¬ ì¸ìƒ í›„ ì‚¼ì„±ì „ì ì£¼ê°€ì™€ ê°€ê³„ ì „ëµì€?"
  â†“
selectRoles() â†’ ["eco", "firm", "house"]
  â†“
mode = "sequential" (3ëª…)
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Eco Expert  â”‚ â† RAG: ê¸ˆë¦¬ ì¸ìƒ ë°ì´í„°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“ (Eco ì¹´ë“œ ìš”ì•½ 800ì ì „ë‹¬)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Firm Expert â”‚ â† RAG: ì‚¼ì„±ì „ì ì‹¤ì  + Eco ìš”ì•½
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“ (Eco + Firm ì¹´ë“œ ìš”ì•½ ì „ë‹¬)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚House Expert â”‚ â† RAG: ê°€ê³„ ëŒ€ì¶œ + Eco/Firm ìš”ì•½
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
Editor í†µí•© â†’ ìµœì¢… 3ê°œ ì¹´ë“œ
```

---

## ğŸ” Request Flow ì „ì²´ íë¦„

### **API ìš”ì²­ â†’ ì‘ë‹µ ì „ì²´ ê³¼ì •**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. HTTP POST /ask                                           â”‚
â”‚    { "q": "ê¸ˆë¦¬ ì¸ìƒ í›„ ì‚¼ì„±ì „ìëŠ”?", "mode": "auto" }      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. prepareAsk() - ask.ts:170-202                            â”‚
â”‚    - explicit roles ì²´í¬                                     â”‚
â”‚    - selectRoles(q) í˜¸ì¶œ â†’ ["eco", "firm"]                  â”‚
â”‚    - mode ê²°ì • â†’ "sequential" (2ëª… ì´ìƒ)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. runAsk() - ask.ts:306-489                                â”‚
â”‚    - attachAdapters(roles) â† LoRA ì¤€ë¹„ (ì‹¤ì œë¡  noop)        â”‚
â”‚    - Sequential ëª¨ë“œ ì‹œì‘                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. runRole("eco", 0) - ask.ts:338-439                       â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚ 4-1. gatherEvidence()                            â”‚    â”‚
â”‚    â”‚      - buildRoleQuery("eco", q, [])              â”‚    â”‚
â”‚    â”‚      - searchRAG(query, ["eco"], 6)              â”‚    â”‚
â”‚    â”‚      â†’ RAG ìƒìœ„ 3ê°œ ê²°ê³¼ ë°˜í™˜                     â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚ 4-2. genDraft()                                  â”‚    â”‚
â”‚    â”‚      - draftPrompt("eco", q, evidences, [])      â”‚    â”‚
â”‚    â”‚      - localGenerate("eco", msgs)                â”‚    â”‚
â”‚    â”‚        â†’ POST http://localhost:8001/chat         â”‚    â”‚
â”‚    â”‚      â†’ Eco ì¹´ë“œ ìƒì„±                             â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚ 4-3. ì¤‘ë³µ ì²´í¬ (ìµœëŒ€ 2-3íšŒ ì‹œë„)                 â”‚    â”‚
â”‚    â”‚      - temperature 0.3, 0.6 ì‹œë„                 â”‚    â”‚
â”‚    â”‚      â†’ ìµœì¢… Eco ì¹´ë“œ í™•ì •                        â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. runRole("firm", 1) - Sequential ëª¨ë“œ                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚ 5-1. ì´ì „ ì¹´ë“œ ì»¨í…ìŠ¤íŠ¸ ì¤€ë¹„                      â”‚    â”‚
â”‚    â”‚      - rawPrevious = [Eco ì¹´ë“œ]                  â”‚    â”‚
â”‚    â”‚      - compactCardForContext(Eco, 6ì¤„, 800ì)    â”‚    â”‚
â”‚    â”‚        â†’ Eco ìš”ì•½ë³¸ ìƒì„±                          â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚ 5-2. gatherEvidence()                            â”‚    â”‚
â”‚    â”‚      - buildRoleQuery("firm", q, [Eco ìš”ì•½])     â”‚    â”‚
â”‚    â”‚      - searchRAG(query, ["firm"], 6)             â”‚    â”‚
â”‚    â”‚        â†’ Eco ì»¨í…ìŠ¤íŠ¸ + ì‚¼ì„±ì „ì í‚¤ì›Œë“œ ê²€ìƒ‰      â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚ 5-3. genDraft()                                  â”‚    â”‚
â”‚    â”‚      - draftPrompt("firm", q, evidences,         â”‚    â”‚
â”‚    â”‚                    previousCards=[Eco ìš”ì•½])     â”‚    â”‚
â”‚    â”‚      - localGenerate("firm", msgs)               â”‚    â”‚
â”‚    â”‚        â†’ POST http://localhost:8002/chat         â”‚    â”‚
â”‚    â”‚      â†’ Firm ì¹´ë“œ ìƒì„± (Eco ë‚´ìš© ì°¸ì¡°)            â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. genEditor() - bridge.ts:213-252                          â”‚
â”‚    - editorPrompt(q, [Ecoì¹´ë“œ, Firmì¹´ë“œ])                   â”‚
â”‚    - localGenerate("editor", msgs)                          â”‚
â”‚      â†’ POST http://localhost:8001/chat (Eco ì„œë²„ ê³µìœ )      â”‚
â”‚    â†’ í†µí•© ì¹´ë“œ 1ê°œ + ë³´ì¡° ì¹´ë“œ 1-2ê°œ                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. HTTP Response                                            â”‚
â”‚    {                                                        â”‚
â”‚      "cards": [                                             â”‚
â”‚        { "type": "combined", "title": "í†µí•© í•´ì„", ... },   â”‚
â”‚        { "type": "eco", "title": "ê±°ì‹œ í•µì‹¬", ... },        â”‚
â”‚        { "type": "firm", "title": "ê¸°ì—… ìŠ¤ëƒ…ìƒ·", ... }      â”‚
â”‚      ],                                                     â”‚
â”‚      "metrics": { "ttft_ms": 2500, "tps": 45 },            â”‚
â”‚      "meta": {                                              â”‚
â”‚        "mode": "sequential",                                â”‚
â”‚        "roles": ["eco", "firm"]                             â”‚
â”‚      }                                                      â”‚
â”‚    }                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Role Selection íœ´ë¦¬ìŠ¤í‹± ìƒì„¸

### **selectRoles() ì „ì²´ ë¡œì§** (ask.ts:60-149)

```typescript
function selectRoles(q: string, prefer: Role[] = []): AskRole[] {
  const s = q.toLowerCase();

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 1ë‹¨ê³„: í‚¤ì›Œë“œ ê°ì§€
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const hasInvest = /(íˆ¬ì|í¬íŠ¸í´ë¦¬ì˜¤|ë¦¬ë°¸ëŸ°ì‹±|ë§¤ìˆ˜|ë§¤ë„|ë¶„ì‚°íˆ¬ì|ìì‚°ë°°ë¶„|ì „ëµ)/.test(s);
  const hasMacroCue = /(gdp|êµ­ë‚´ì´ìƒì‚°|ê¸ˆë¦¬|í™˜ìœ¨|ì •ì±…|ê²½ê¸°|ê²½ì œ|ë¬¼ê°€|ë¶€ë™ì‚°|dxy|ìœ ê°€)/.test(s);
  const hasSpecificFirm = /(ì‚¼ì„±|í•˜ì´ë‹‰ìŠ¤|ë„¤ì´ë²„|ì¹´ì¹´ì˜¤|í˜„ëŒ€|sk|lg|í…ŒìŠ¬ë¼|ì—”ë¹„ë””ì•„|ì• í”Œ)/.test(s);
  const hasGenericFirm = /(ê¸°ì—…|íšŒì‚¬|ì—…ì¢…|ì„¹í„°|ì‚°ì—…|ì¢…ëª©|ë¶„ì•¼|ì‹œì¥)/.test(s);
  const hasHouseCue = /(ê°€ê³„|ê°€ì¡±|ì€í‡„|ì—°ê¸ˆ|ì €ì¶•|ì˜ˆê¸ˆ|ì ê¸ˆ|ì±„ê¶Œ|í¬íŠ¸í´ë¦¬ì˜¤|dsr|ëŒ€ì¶œ)/.test(s);

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 2ë‹¨ê³„: Special Intent Routing (ìš°ì„ ìˆœìœ„ ë†’ìŒ)
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  // "ì½”ìŠ¤í”¼ê°€ ë­ì•¼?" â†’ eco only
  if (/ì½”ìŠ¤í”¼/.test(s) && /(ë­ì•¼|ë¬´ì—‡|ëœ»|ì„¤ëª…)/.test(s)) {
    return ['eco'];
  }

  // "ì˜¤ë¥´ëŠ” ë° ê°€ì¥ ê¸°ì—¬í•œ ê¸°ì—…ì€?" â†’ eco â†’ firm
  if (/(ê¸°ì—¬|ê¸°ì—¬í•œ).*(ê¸°ì—…)/.test(s) || /(ê¸°ì—¬).*(ì½”ìŠ¤í”¼|ì§€ìˆ˜)/.test(s)) {
    return ['eco', 'firm'];
  }

  // "ì–´ë–¤ ê¸°ì—…ì— íˆ¬ìí•˜ë©´ ì¢‹ì„ê¹Œ?" â†’ eco â†’ firm â†’ house
  if (/(ì–´ë–¤\s*ê¸°ì—…|ê¸°ì—…).*íˆ¬ì(í•˜ë©´|í• ê¹Œ|ì¢‹ì„ê¹Œ)/.test(s) || /(íˆ¬ì).*(ê¸°ì—…)/.test(s)) {
    return ['eco', 'firm', 'house'];
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 3ë‹¨ê³„: í‚¤ì›Œë“œ ì¡°í•© íŒ¨í„´ ë¶„ì„
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  // preferê°€ ì—†ëŠ” ê²½ìš°ì˜ ë‹¨ì¶• ê²½ë¡œ
  const preferActive = prefer.length > 0;

  if (!preferActive) {
    if (/(gdp|êµ­ë‚´ì´ìƒì‚°)/.test(s)) {
      return ['eco'];  // GDP â†’ eco only
    }

    if (hasSpecificFirm && hasInvest) {
      return ['firm', 'house'];  // ì‚¼ì„± + íˆ¬ì â†’ firm, house
    }

    if (hasSpecificFirm && !hasInvest && !hasMacroCue) {
      return ['firm'];  // ì‚¼ì„± ë‹¨ë… â†’ firm only
    }

    if (hasHouseCue && !hasSpecificFirm && !hasGenericFirm) {
      return hasMacroCue ? ['eco', 'house'] : ['house'];
    }

    // ... ë” ë§ì€ íŒ¨í„´
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 4ë‹¨ê³„: í‚¤ì›Œë“œ ë²„í¼ ëˆ„ì 
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const buffer: Role[] = prefer.slice(0, 3);

  if (/(ê¸ˆë¦¬|í™˜ìœ¨|ì •ì±…|ê²½ê¸°|ê²½ì œ|ë¬¼ê°€|ë¶€ë™ì‚°)/.test(s)) buffer.push('eco');
  if (/(per|roe|ì¬ë¬´|ì‹¤ì |ê¸°ì—…|íšŒì‚¬|ì¢…ëª©|ë°˜ë„ì²´)/.test(s)) buffer.push('firm');
  if (/(ê°€ê³„|í¬íŠ¸í´ë¦¬ì˜¤|dsr|ëŒ€ì¶œ|ë¶„ì‚°|ì˜ˆì‚°|ë¦¬ìŠ¤í¬)/.test(s)) buffer.push('house');

  let roles = sanitizeSequence(buffer);  // ì¤‘ë³µ ì œê±°

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 5ë‹¨ê³„: ê¸°ë³¸ê°’ ë° ë³´ì •
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  if (!roles.length) {
    roles = ['eco', 'firm', 'house'];  // ëª¨í˜¸í•œ ì§ˆë¬¸ â†’ ì „ì²´
  }

  if (!roles.includes('eco')) {
    roles = ['eco', ...roles];  // ecoê°€ ì—†ìœ¼ë©´ í•­ìƒ ì¶”ê°€
  }

  // ë‹¨ì¼ ì—­í• ì¸ ê²½ìš° í™•ì¥ ë¡œì§
  if (roles.length === 1) {
    const single = roles[0];
    if (single === 'eco') {
      const addFirm = /(ê¸°ì—…|ì‹¤ì |ì£¼ê°€|ì‚°ì—…|ì‹œì¥|íˆ¬ì)/.test(s);
      const addHouse = /(ê°€ê³„|í¬íŠ¸í´ë¦¬ì˜¤|ëŒ€ì¶œ|ë¶€ì±„|ì†Œë¹„)/.test(s);
      roles = ['eco'];
      if (addFirm) roles.push('firm');
      if (addHouse) roles.push('house');
      if (roles.length === 1) {
        roles.push('firm', 'house');  // ecoë§Œ â†’ ì „ì²´ë¡œ í™•ì¥
      }
    }
    // firm/house ë‹¨ë…ë„ ìœ ì‚¬í•˜ê²Œ í™•ì¥
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 6ë‹¨ê³„: ìµœì¢… ìˆœì„œ ì •ë ¬ ë° ê²€ì¦
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  const ROLE_ORDER: AskRole[] = ['eco', 'firm', 'house'];
  const ordered = ROLE_ORDER.filter((role) => roles.includes(role));

  return enforceAllowed(ordered.length ? ordered : ['eco', 'firm', 'house']);
}
```

---

### **ì‹¤ì œ ì˜ˆì‹œ**

#### **ì˜ˆì‹œ 1: "ë¯¸êµ­ ê¸ˆë¦¬ ì¸ìƒì´ ì‚¼ì„±ì „ì ì£¼ê°€ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì€?"**

```
Step 1: í‚¤ì›Œë“œ ê°ì§€
  - hasMacroCue = true  â† "ê¸ˆë¦¬"
  - hasSpecificFirm = true  â† "ì‚¼ì„±ì „ì"
  - hasInvest = false

Step 2: Special Intent
  - /(ì–´ë–¤\s*ê¸°ì—…|ê¸°ì—…).*íˆ¬ì/ â† ë§¤ì¹­ ì•ˆ ë¨

Step 3: ì¡°í•© íŒ¨í„´
  - hasSpecificFirm && !hasInvest && hasMacroCue
  - â†’ ë§¤ì¹­ ì•ˆ ë¨ (hasMacroCue=trueì´ë¯€ë¡œ)

Step 4: ë²„í¼ ëˆ„ì 
  - buffer = []
  - "ê¸ˆë¦¬" ê°ì§€ â†’ buffer.push('eco')
  - "ì‚¼ì„±ì „ì" ê°ì§€ â†’ buffer.push('firm')
  - roles = ['eco', 'firm']

Step 5: ê¸°ë³¸ê°’ ë³´ì •
  - roles.length > 1 â†’ í†µê³¼
  - roles.includes('eco') â†’ í†µê³¼

Step 6: ìµœì¢… ì •ë ¬
  - ordered = ['eco', 'firm']

âœ… ê²°ê³¼: ["eco", "firm"]
```

#### **ì˜ˆì‹œ 2: "ì½”ìŠ¤í”¼ê°€ ë­ì•¼?"**

```
Step 2: Special Intent
  - /ì½”ìŠ¤í”¼/.test(s) && /(ë­ì•¼|ë¬´ì—‡|ëœ»|ì„¤ëª…)/.test(s)
  - âœ… ë§¤ì¹­!

âœ… ê²°ê³¼: ["eco"] (ì¦‰ì‹œ ë°˜í™˜)
```

#### **ì˜ˆì‹œ 3: "ì–´ë–¤ ê¸°ì—…ì— íˆ¬ìí•˜ë©´ ì¢‹ì„ê¹Œ?"**

```
Step 2: Special Intent
  - /(ì–´ë–¤\s*ê¸°ì—…|ê¸°ì—…).*íˆ¬ì(í•˜ë©´|í• ê¹Œ|ì¢‹ì„ê¹Œ)/.test(s)
  - âœ… ë§¤ì¹­!

âœ… ê²°ê³¼: ["eco", "firm", "house"] (ì¦‰ì‹œ ë°˜í™˜)
```

---

## ğŸ“Š Expert í™œì„±í™” íë¦„ ìš”ì•½

```
ì‚¬ìš©ì ìš”ì²­
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ prepareAsk()                            â”‚
â”‚  â”œâ”€ explicit roles ìˆìŒ?                â”‚
â”‚  â”‚   â”œâ”€ Yes â†’ ê·¸ëŒ€ë¡œ ì‚¬ìš©                â”‚
â”‚  â”‚   â””â”€ No â†’ selectRoles(q) í˜¸ì¶œ        â”‚
â”‚  â”‚         â†“                            â”‚
â”‚  â”‚   [íœ´ë¦¬ìŠ¤í‹± ë¶„ì„]                     â”‚
â”‚  â”‚    - í‚¤ì›Œë“œ ê°ì§€                      â”‚
â”‚  â”‚    - íŠ¹ìˆ˜ íŒ¨í„´ ì²´í¬                   â”‚
â”‚  â”‚    - ë²„í¼ ëˆ„ì  & ì •ë ¬                 â”‚
â”‚  â”‚         â†“                            â”‚
â”‚  â”‚   ["eco", "firm", "house"]           â”‚
â”‚  â”‚                                      â”‚
â”‚  â””â”€ mode ê²°ì •                            â”‚
â”‚      - roles.length > 1 â†’ sequential    â”‚
â”‚      - roles.length === 1 â†’ selectMode()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ runAsk()                                â”‚
â”‚  - Sequential ëª¨ë“œ ì‹œì‘                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ for each role in ["eco", "firm", ...]: â”‚
â”‚   â”œâ”€ gatherEvidence()                  â”‚
â”‚   â”‚    - buildRoleQuery()               â”‚
â”‚   â”‚    - searchRAG()                    â”‚
â”‚   â”‚                                     â”‚
â”‚   â”œâ”€ genDraft()                         â”‚
â”‚   â”‚    - draftPrompt()                  â”‚
â”‚   â”‚    - localGenerate(role, msgs)      â”‚
â”‚   â”‚      â†’ HTTP POST to 8001/8002/8003  â”‚
â”‚   â”‚                                     â”‚
â”‚   â””â”€ ì¤‘ë³µ ì²´í¬ & ìµœì¢… ì¹´ë“œ í™•ì •          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ genEditor()                             â”‚
â”‚  - editorPrompt()                       â”‚
â”‚  - localGenerate("editor", msgs)        â”‚
â”‚    â†’ HTTP POST to 8001 (Eco ì„œë²„ ê³µìœ )  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
ìµœì¢… ì‘ë‹µ (cards + metrics + meta)
```

---

## ğŸ”‘ í•µì‹¬ ìš”ì•½

1. **Router ì œê±°**: AI ê¸°ë°˜ `planRoles()` ì™„ì „ ì œê±°, íœ´ë¦¬ìŠ¤í‹±ë§Œ ì‚¬ìš©
2. **Expert ì„ íƒ**: `selectRoles()` íœ´ë¦¬ìŠ¤í‹±ì´ ì§ˆë¬¸ íŒ¨í„´ ë¶„ì„í•˜ì—¬ ìë™ ê²°ì •
3. **Sequential ì²´ì¸**: Eco â†’ Firm â†’ House ìˆœì„œë¡œ ì´ì „ ì¹´ë“œ ìš”ì•½(800ì)ì„ ë‹¤ìŒ Expertì—ê²Œ ì „ë‹¬
4. **í¬íŠ¸ í• ë‹¹**:
   - 8001: Eco (+ Editor/Router ê³µìœ )
   - 8002: Firm
   - 8003: House
5. **ì‘ë‹µ ì‹œê°„**: AI planner ì œê±°ë¡œ 200-300ms ë‹¨ì¶•
